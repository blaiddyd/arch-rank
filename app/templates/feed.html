{% extends "sidebar-base.html" %}
{% block content %}
    <style>
         .container {
              width: 75%;
              margin: 3rem auto;
              display: flex;
              justify-content: start;
              align-content: start;
              align-items: start;
              flex-direction: column;
         }

         .form-body {

         }
         .tab--slider {
              width: 100%;
              float: left;
              margin-bottom: 20px;
         }
         
         .tab--tabs {
              display: block;
              float: left;
              margin: 0;
              padding: 0;
              list-style: none;
              position: relative;
              border-radius: 20px;
              overflow: hidden;
              background: white;
              height: 35px;
              user-select: none;
          }

          .tab--tabs::after {
               content: "";
               width: 50%;
               background: #4e79a8;
               height: 100%;
               position: absolute;
               top: 0;
               left: 0;
               transition: all 250ms ease-in-out;
               border-radius: 20px;
          }

          .tab--tabs.slide::after {
               left: 50%;
          }

          .tab-slider--trigger {
               font-size: 12px;
               line-height: 1;
               font-weight: bold;
               color: white;
               text-transform: uppercase;
               text-align: center;
               padding: 11px 20px;
               position: relative;
               z-index: 2;
               cursor: pointer;
               display: inline-block;
               transition: color 250ms ease-in-out;
               user-select: none;
          }

          .tab-slider--trigger:active {
               color: white;
          }

          .tab--body {
               margin-bottom: 20px;
          }

    
    </style>
     <div id="feed">
          <p>Feed</p>
          <a href="{{ url_for('logout')}}">Logout</a>
          <div class="container">
               <div class="tab--slider">
                    <ul class="tab--tabs">
                         <li class="tab-slider--trigger active" rel="report-tab">
                              Report
                         </li>
                         <li class="tab-slider--trigger" rel="status-tab">
                              Status
                         </li>
                    </ul>
               </div>
               <div class="tab--container">
                    <div id="report-tab" class="tab--body">
                         <form method="post">
                              {{ form.hidden_tag() }}
                              <div class="form-body">
                                   {{ form.body(size=140) }} 
                              </div>
                              {{ form.traitor.label }}
                              {{ form.traitor(size=8) }}
                              {{ form.category.label }}
                              {{ form.category }}
                              {{ form.report_submit() }}
                         </form>
                    </div>

                    <div id="status-tab" class="tab--body">
                         <form method="post">
                              {{ status_input.hidden_tag() }}
                              {{ status_input.status_category.label() }}
                              {{ status_input.status_category }}
                              {{ status_input.status.label }}
                              {{ status_input.status(size=140) }}
                              {{ status_input.status_submit() }}
                         </form>
                    </div>
               </div>
          </div>
          <div>
               <h3>Recent Reports</h3>
               {% for report in reports %}
                    {{ report.reporter_id }}
                    {{ report.reported_id }}
                    {{ report.report_category }}
                    {{ report.time }}
                    {{ report.body }}
               {% endfor %}
          </div>

          <div>
               <h3>Recent Status</h3>
               {% for status in statuses %}
                    {{ status.citizen_id }}
                    {{ status.body }}
                    {{ status.timestamp }}
                    {{ status.status_category }}
               {% endfor %}

          </div>
     </div>
     <script>
        $("document").ready(function(){
               $(".tab--body").hide();
               $(".tab--body:first").show();
          });

          $(".tab--slider li").click(function() {
               $(".tab--body").hide();
               var activeTab = $(this).attr("rel");
               $("#" + activeTab).fadeIn();
                    if ($(this).attr("rel") == "status-tab"){
                         $('.tab--tabs').addClass('slide');
                    }
                    else{
                         $('.tab--tabs').removeClass('slide');
                    }
               $(".tab--slider li").removeClass("active");
               $(this).addClass("active");
          });


     </script>
{% endblock content %}
